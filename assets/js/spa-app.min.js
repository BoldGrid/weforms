"use strict";var _typeof13="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof12="function"==typeof Symbol&&"symbol"===_typeof13(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof13(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof13(t)},_typeof11="function"==typeof Symbol&&"symbol"===_typeof12(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof12(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof12(t)},_typeof10="function"==typeof Symbol&&"symbol"===_typeof11(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof11(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof11(t)},_typeof9="function"==typeof Symbol&&"symbol"===_typeof10(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof10(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof10(t)},_typeof8="function"==typeof Symbol&&"symbol"===_typeof9(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof9(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof9(t)},_typeof7="function"==typeof Symbol&&"symbol"===_typeof8(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof8(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof8(t)},_typeof6="function"==typeof Symbol&&"symbol"===_typeof7(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof7(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof7(t)},_typeof5="function"==typeof Symbol&&"symbol"===_typeof6(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof6(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof6(t)},_typeof4="function"==typeof Symbol&&"symbol"===_typeof5(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof5(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof5(t)},_typeof3="function"==typeof Symbol&&"symbol"===_typeof4(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof4(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof4(t)},_typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof3(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof3(t)},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};!function(s){Vue.component("wpuf-table",{template:"#tmpl-wpuf-component-table",mixins:[weForms.mixins.Loading,weForms.mixins.Paginate,weForms.mixins.BulkAction],props:{has_export:String,action:String,delete:String,id:[String,Number],status:[String]},data:function(){return{loading:!1,columns:[],items:[],ajaxAction:this.action,nonce:weForms.nonce,index:"id",bulkDeleteAction:this.delete?this.delete:"weforms_form_entry_trash_bulk"}},created:function(){this.fetchData()},computed:{columnLength:function(){return Object.keys(this.columns).length}},methods:{fetchData:function(){var e=this;this.loading=!0,wp.ajax.send(e.action,{data:{id:e.id,page:e.currentPage,status:e.status,_wpnonce:weForms.nonce},success:function(t){e.loading=!1,e.columns=t.columns,e.items=t.entries,e.form_title=t.form_title,e.totalItems=t.pagination.total,e.perPage=t.pagination.per_page,e.totalPage=t.pagination.pages,e.$emit("ajaxsuccess",t)},error:function(t){e.loading=!1,alert(t)}})},handleBulkAction:function(){if("-1"!==this.bulkAction){if("delete"===this.bulkAction){if(!this.checkedItems.length)return void alert("Please select atleast one entry to delete.");confirm("Are you sure to delete the entries?")&&this.deleteBulk()}if("restore"===this.bulkAction){if(!this.checkedItems.length)return void alert("Please select atleast one entry to restore.");this.restoreBulk()}}else alert("Please chose a bulk action to perform")},restore:function(t){var e=this;e.loading=!0,wp.ajax.send("weforms_form_entry_restore",{data:{entry_id:t,_wpnonce:weForms.nonce},success:function(t){e.loading=!1,e.fetchData()},error:function(t){e.loading=!1,alert(t)}})},deletePermanently:function(t){if(confirm("Are you sure to delete this entry?")){var e=this;e.loading=!0,wp.ajax.send("weforms_form_entry_delete",{data:{entry_id:t,_wpnonce:weForms.nonce},success:function(t){e.loading=!1,e.fetchData()},error:function(t){e.loading=!1,alert(t)}})}}},watch:{id:function(){this.fetchData()},status:function(){this.currentPage=1,this.bulkAction=-1,this.fetchData()}}}),weForms.routeComponents.Entries={template:"#tmpl-wpuf-entries",data:function(){return{selected:0,forms:{},form_title:"Loading...",status:"publish",total:0,totalTrash:0}},created:function(){this.get_forms()},methods:{get_forms:function(){var e=this;wp.ajax.send("weforms_form_list",{data:{_wpnonce:weForms.nonce,page:e.currentPage,posts_per_page:-1,filter:"entries"},success:function(t){Object.keys(t.forms).length?(e.forms=t.forms,e.selected=e.forms[Object.keys(e.forms)[0]].id):e.form_title="No entry found"},error:function(t){alert(t)}})}}},weForms.routeComponents.FormEditComponent={template:"#tmpl-wpuf-form-builder",mixins:wpuf_form_builder_mixins(wpuf_mixins.root),data:function(){return{is_form_saving:!1,is_form_saved:!1,is_form_switcher:!1,post_title_editing:!1,loading:!1,activeTab:"editor",activeSettingsTab:"form",activePaymentTab:"paypal"}},watch:{loading:function(t){t?(NProgress.configure({parent:"#wpadminbar"}),NProgress.start()):NProgress.done()},form_fields:{handler:function(){window.weFormsBuilderisDirty=!0},deep:!0},notifications:{handler:function(){window.weFormsBuilderisDirty=!0},deep:!0},integrations:{handler:function(){window.weFormsBuilderisDirty=!0},deep:!0},settings:{handler:function(){window.weFormsBuilderisDirty=!0},deep:!0},payment:{handler:function(){window.weFormsBuilderisDirty=!0},deep:!0}},created:function(){this.set_current_panel("form-fields"),this.fetchForm(),this.$store.commit("panel_add_show_prop"),wpuf_form_builder.event_hub=new Vue},computed:{current_panel:function(){return this.$store.state.current_panel},post:function(){return this.$store.state.post},form_fields_count:function(){return this.$store.state.form_fields.length},form_fields:function(){return this.$store.state.form_fields},notifications:function(){return this.$store.state.notifications},integrations:function(){return this.$store.state.integrations},settings:function(){return this.$store.state.settings},payment:function(){return this.$store.state.payment}},mounted:function(){var t=new window.Clipboard(".form-id");s(".form-id").tooltip();var e=this;this.started=!0,t.on("success",function(t){s(t.trigger).attr("data-original-title","Copied!").tooltip("show"),setTimeout(function(){s(t.trigger).tooltip("hide").attr("data-original-title",e.i18n.copy_shortcode)},1e3),t.clearSelection()}),this.initSharingClipBoard(),setTimeout(function(){window.weFormsBuilderisDirty=!1},500),window.onbeforeunload=function(){if(window.weFormsBuilderisDirty)return e.i18n.unsaved_changes}},methods:{makeActive:function(t){this.activeTab=t},isActiveTab:function(t){return this.activeTab===t},isActiveSettingsTab:function(t){return this.activeSettingsTab===t},makeActiveSettingsTab:function(t){this.activeSettingsTab=t},isActivePaymentTab:function(t){return this.activePaymentTab===t},makeActivePaymentTab:function(t){this.activePaymentTab=t},fetchForm:function(){var e=this;e.loading=!0,wp.ajax.send("weforms_get_form",{data:{form_id:this.$route.params.id,_wpnonce:weForms.nonce},success:function(t){e.$store.commit("set_form_post",t.post),e.$store.commit("set_form_fields",t.form_fields),e.$store.commit("set_form_notification",t.notifications),e.$store.commit("set_form_settings",t.settings),void 0!==t.integrations.length?e.$store.commit("set_form_integrations",{}):e.$store.commit("set_form_integrations",t.integrations)},error:function(t){alert(t)},complete:function(){e.loading=!1}})},set_current_panel:function(t){this.$store.commit("set_current_panel",t)},save_form_builder:function(){var e=this;!_.isFunction(this.validate_form_before_submit)||this.validate_form_before_submit()?(e.is_form_saving=!0,e.set_current_panel("form-fields"),wp.ajax.send("wpuf_form_builder_save_form",{data:{form_data:s("#wpuf-form-builder").weSerialize(),form_fields:JSON.stringify(e.form_fields),notifications:JSON.stringify(e.notifications),settings:JSON.stringify(e.settings),payment:JSON.stringify(e.payment),integrations:JSON.stringify(e.integrations)},success:function(t){t.form_fields&&e.$store.commit("set_form_fields",t.form_fields),e.is_form_saving=!1,e.is_form_saved=!0,setTimeout(function(){window.weFormsBuilderisDirty=!1},500),toastr.success(e.i18n.saved_form_data)},error:function(){e.is_form_saving=!1}})):this.warn({text:this.validation_error_msg})},save_settings:function(){toastr.options.preventDuplicates=!0,this.save_form_builder()},shareForm:function(t,e){var n=this;if("on"===n.settings.sharing_on){var o=t+"?weforms="+btoa(n.getSharingHash()+"_"+Math.floor(Date.now()/1e3)+"_"+e.ID);swal({title:n.i18n.shareYourForm,html:"<p>"+n.i18n.shareYourFormText+'</p> <p><input onClick="this.setSelectionRange(0, this.value.length)" type="text" class="regular-text" value="'+o+'"/> <button class="anonymous-share-btn button button-primary" title="Copy URL" data-clipboard-text="'+o+'"><i class="fa fa-clipboard" aria-hidden="true"></i></button></p>',showCloseButton:!0,showCancelButton:!0,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",confirmButtonColor:"#d54e21",confirmButtonText:n.i18n.disableSharing,cancelButtonText:n.i18n.close,focusCancel:!0}).then(function(){swal({title:n.i18n.areYouSure,html:"<p>"+n.i18n.areYouSureDesc+"</p>",type:"info",confirmButtonColor:"#d54e21",showCancelButton:!0,confirmButtonText:n.i18n.disable,cancelButtonText:n.i18n.cancel}).then(function(){n.disableSharing()})})}else swal({title:n.i18n.shareYourForm,html:n.i18n.shareYourFormDesc,type:"info",showCancelButton:!0,confirmButtonText:"Enable",cancelButtonText:"Cancel"}).then(function(){n.enableSharing(t,e)})},enableSharing:function(t,e){this.settings.sharing_on="on",this.save_settings(),this.shareForm(t,e)},disableSharing:function(){this.settings.sharing_on=!1,this.save_settings()},getSharingHash:function(){return this.settings.sharing_hash||(this.settings.sharing_hash=this.makeRandomString(8),this.save_settings()),this.settings.sharing_hash},makeRandomString:function(t){t=t||8;for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},initSharingClipBoard:function(t){var e=new window.Clipboard(".anonymous-share-btn");s(".anonymous-share-btn").tooltip(),e.on("success",function(t){s(t.trigger).attr("data-original-title","Copied!").tooltip("show"),setTimeout(function(){s(t.trigger).tooltip("hide").attr("data-original-title","Copy URL")},1e3),t.clearSelection()})}}},weForms.routeComponents.FormEntries={props:{id:[String,Number]},template:"#tmpl-wpuf-form-entries",data:function(){return{selected:0,form_title:"Loading...",status:"publish",total:0,totalTrash:0}}},weForms.routeComponents.FormEntriesSingle={template:"#tmpl-wpuf-form-entry-single",mixins:[weForms.mixins.Loading,weForms.mixins.Cookie],data:function(){return{loading:!1,hideEmpty:!0,hasEmpty:!1,show_payment_data:!1,entry:{form_fields:{},meta_data:{},payment_data:{}},form_settings:{},respondent_points:0,answers:{},countries:weForms.countries}},created:function(){this.hideEmpty=this.hideEmptyStatus(),this.fetchData()},computed:{hasFormFields:function(){return Object.keys(this.entry.form_fields).length}},methods:{fetchData:function(){var e=this;this.loading=!0,wp.ajax.send("weforms_form_entry_details",{data:{entry_id:e.$route.params.entryid,form_id:e.$route.params.id,_wpnonce:weForms.nonce},success:function(t){e.loading=!1,e.entry=t,e.hasEmpty=t.has_empty,e.form_settings=t.form_settings,e.respondent_points=t.respondent_points,e.answers=t.answers},error:function(t){e.loading=!1,alert(t)}})},trashEntry:function(){var e=this;confirm(weForms.confirm)&&wp.ajax.send("weforms_form_entry_trash",{data:{entry_id:e.$route.params.entryid,_wpnonce:weForms.nonce},success:function(){e.loading=!1,e.$router.push({name:"formEntries",params:{id:e.$route.params.id}})},error:function(t){e.loading=!1,alert(t)}})},hideEmptyStatus:function(){return"false"!==this.getCookie("weFormsEntryHideEmpty")},findCountry:function(e){return this.countries.find(function(t){return t.code===e})},getCountryName:function(t){if(this.findCountry(t))return this.findCountry(t).name},getAddressFieldValue:function(t){var e=t.match(/Country Select:(\s([A-Z])\w+)/g);if(null===e)return t;var n=e[0].substring(15,e[0].length).trim(),o=this.getCountryName(n),i=n;return t.replace(i,o)}},watch:{hideEmpty:function(t){this.setCookie("weFormsEntryHideEmpty",t,356)}}},Vue.component("form-list-table",{template:"#tmpl-wpuf-form-list-table",mixins:[weForms.mixins.Loading,weForms.mixins.Paginate,weForms.mixins.BulkAction],data:function(){return{loading:!1,index:"ID",items:[],bulkDeleteAction:"weforms_form_delete_bulk"}},created:function(){this.fetchData()},computed:{is_pro:function(){return"true"===weForms.is_pro},has_payment:function(){return"true"===weForms.has_payment}},methods:{fetchData:function(){var e=this;this.loading=!0,wp.ajax.send("weforms_form_list",{data:{_wpnonce:weForms.nonce,page:e.currentPage},success:function(t){e.loading=!1,e.items=t.forms,e.totalItems=t.meta.total,e.totalPage=t.meta.pages},error:function(t){e.loading=!1,alert(t)}})},deleteForm:function(e){var n=this;confirm("Are you sure?")&&(n.loading=!0,wp.ajax.send("weforms_form_delete",{data:{form_id:this.items[e].id,_wpnonce:weForms.nonce},success:function(t){n.items.splice(e,1),n.loading=!1},error:function(t){alert(t),n.loading=!1}}))},duplicate:function(t,e){var n=this;this.loading=!0,wp.ajax.send("weforms_form_duplicate",{data:{form_id:t,_wpnonce:weForms.nonce},success:function(t){n.items.splice(0,0,t),n.loading=!1},error:function(t){alert(t),n.loading=!1}})},handleBulkAction:function(){if("-1"!==this.bulkAction){if("delete"===this.bulkAction){if(!this.checkedItems.length)return void alert("Please select atleast one form to delete.");confirm("Are you sure to delete the forms?")&&this.deleteBulk()}}else alert("Please chose a bulk action to perform")},isPendingForm:function(t){return Math.round((new Date).getTime()/1e3)<Math.round(new Date(t).getTime()/1e3)},isExpiredForm:function(t){var e=Math.round((new Date).getTime()/1e3);return Math.round(new Date(t).getTime()/1e3)<e},isOpenForm:function(t,e){var n=Math.round((new Date).getTime()/1e3),o=Math.round(new Date(t).getTime()/1e3),i=Math.round(new Date(e).getTime()/1e3);return o<n&&n<i},isFormStatusClosed:function(t,e){return!("true"!==t.schedule_form||!this.isPendingForm(t.schedule_start))||(!("true"!==t.schedule_form||!this.isExpiredForm(t.schedule_end))||("true"===t.limit_entries&&e>=t.limit_number||void 0))},formatTime:function(t){var e=new Date(t);return e.toLocaleString("en-us",{month:"short"})+" "+e.getDate()+", "+e.getFullYear()}}}),weForms.routeComponents.FormPayments={props:{id:[String,Number]},template:"#tmpl-wpuf-form-payments",data:function(){return{form_title:"Loading..."}}},weForms.routeComponents.Home={template:"#tmpl-wpuf-home-page",data:function(){return{showTemplateModal:!1}},methods:{displayModal:function(){this.showTemplateModal=!0},closeModal:function(){this.showTemplateModal=!1}}},weForms.routeComponents.Tools={template:"#tmpl-wpuf-tools",mixins:[weForms.mixins.Tabs,weForms.mixins.Loading],data:function(){return{activeTab:"export",exportType:"all",loading:!1,forms:[],importButton:"Import",currentStatus:0,responseMessage:"",logs:[],ximport:{current:"",title:"",action:"",message:"",type:"updated",refs:{}}}},computed:{isInitial:function(){return 0===this.currentStatus},isSaving:function(){return 1===this.currentStatus},isSuccess:function(){return 2===this.currentStatus},isFailed:function(){return 3===this.currentStatus},hasRefs:function(){return Object.keys(this.ximport.refs).length},hasLogs:function(){return Object.keys(this.logs).length}},created:function(){this.fetchData(),this.fetchLogs()},methods:{fetchLogs:function(e){var n=this;n.startLoading(e),wp.ajax.send("weforms_read_logs",{data:{_wpnonce:weForms.nonce},success:function(t){n.stopLoading(e),n.logs=t},error:function(){n.stopLoading(e),n.logs=[]}})},deleteLogs:function(e){var n=this;confirm("Are you sure to clear the log file?")&&(n.startLoading(e),wp.ajax.send("weforms_delete_logs",{data:{_wpnonce:weForms.nonce},success:function(t){n.logs=[],n.stopLoading(e),n.fetchLogs()},error:function(t){n.logs=[],n.stopLoading(e),n.fetchLogs()}}))},stopLoading:function(t){(t=s(t)).is("button")?t.removeClass("updating-message").find("span").show():t.is("span")&&t.show().parent().removeClass("updating-message")},startLoading:function(t){(t=s(t)).is("button")?t.addClass("updating-message").find("span").hide():t.is("span")&&t.hide().parent().addClass("updating-message")},fetchData:function(){var e=this;this.loading=!0,wp.ajax.send("weforms_form_names",{data:{_wpnonce:weForms.nonce},success:function(t){e.loading=!1,e.forms=t},error:function(t){e.loading=!1,alert(t)}})},importForm:function(t,e,n){if(e.length){var o=new FormData,i=this;o.append(t,e[0],e[0].name),o.append("action","weforms_import_form"),o.append("_wpnonce",weForms.nonce),i.currentStatus=1,s.ajax({type:"POST",url:window.ajaxurl,data:o,processData:!1,contentType:!1,success:function(t){i.responseMessage=t.data,t.success?i.currentStatus=2:i.currentStatus=3,s(n.target).val("")},error:function(t){console.log(t),i.currentStatus=3},complete:function(){s(n.target).val("")}})}},importx:function(t,e){var n=s(t),o=this;o.ximport.current=e,n.addClass("updating-message").text(n.data("importing")),wp.ajax.send("weforms_import_xforms_"+e,{data:{_wpnonce:weForms.nonce},success:function(t){o.ximport.title=t.title,o.ximport.message=t.message,o.ximport.action=t.action,o.ximport.refs=t.refs},error:function(t){alert(t.message)},complete:function(){n.removeClass("updating-message").text(n.data("original"))}})},replaceX:function(t,e){var n=s(t),o=this;n.addClass("updating-message"),wp.ajax.send("weforms_import_xreplace_"+o.ximport.current,{data:{type:e,_wpnonce:weForms.nonce},success:function(t){"replace"===n.data("type")&&alert(t)},error:function(t){alert(t)},complete:function(){o.ximport.current="",o.ximport.title=""}})}}},weForms.routeComponents.Transactions={template:"#tmpl-wpuf-transactions",data:function(){return{selected:0,no_transactions:!1,forms:{},form_title:"Loading..."}},created:function(){this.get_forms()},methods:{get_forms:function(){var e=this;wp.ajax.send("weforms_form_list",{data:{_wpnonce:weForms.nonce,page:e.currentPage,filter:"transactions"},success:function(t){Object.keys(t.forms).length?(e.forms=t.forms,e.selected=e.forms[Object.keys(e.forms)[0]].id):(e.form_title="No transaction found",e.no_transactions=!0)},error:function(t){alert(t)}})}}},weForms.routeComponents.Help={template:"#tmpl-wpuf-weforms-page-help"},weForms.routeComponents.Privacy={template:"#tmpl-wpuf-weforms-page-privacy"},weForms.routeComponents.Premium={template:"#tmpl-wpuf-weforms-premium",data:function(){return{showModal:!1}}},weForms.routeComponents.Settings={template:"#tmpl-wpuf-weforms-settings",mixins:[weForms.mixins.Loading,weForms.mixins.Cookie],data:function(){return{loading:!1,settings:{email_gateway:"wordpress",credit:!1,permission:"manage_options",gateways:{sendgrid:"",mailgun:"",sparkpost:""},recaptcha:{type:"v2",key:"",secret:""}},activeTab:"general"}},computed:{is_pro:function(){return"true"===weForms.is_pro}},created:function(){this.fetchSettings(),this.getCookie("weforms_settings_active_tab")&&(this.activeTab=this.getCookie("weforms_settings_active_tab"))},methods:{makeActive:function(t){this.activeTab=t},isActiveTab:function(t){return this.activeTab===t},fetchSettings:function(){var t=this;t.loading=!0,wp.ajax.send("weforms_get_settings",{data:{_wpnonce:weForms.nonce},success:function(n){void 0!==n&&(s.each(t.settings,function(t,e){void 0===n[t]&&(n[t]=e)}),t.settings=n)},complete:function(){t.loading=!1}})},saveSettings:function(t){s(t).addClass("updating-message"),wp.ajax.send("weforms_save_settings",{data:{settings:JSON.stringify(this.settings),_wpnonce:weForms.nonce},success:function(t){toastr.options.timeOut=1e3,toastr.success("Settings has been updated"),weForms.settings=t},error:function(t){console.log(t)},complete:function(){s(t).removeClass("updating-message")}})},post:function(t,e,n){n=n||function(){},(e=e||{})._wpnonce=weForms.nonce,wp.ajax.send(t,{data:e,success:function(t){n(t)},error:function(t){console.log(t)},complete:function(){}})}},watch:{activeTab:function(t){this.setCookie("weforms_settings_active_tab",t,"365")}}},Array.prototype.hasOwnProperty("swap")||(Array.prototype.swap=function(t,e){this.splice(e,0,this.splice(t,1)[0])}),Vue.component("datepicker",{template:'<input type="text" v-bind:value="value" />',props:["value"],mounted:function(){s(this.$el).datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",onClose:this.onClose})},methods:{onClose:function(t){this.$emit("input",t)}}}),Vue.component("weforms-colorpicker",{template:'<input type="text" v-bind:value="value" />',props:["value"],mounted:function(){s(this.$el).wpColorPicker({change:this.onChange})},methods:{onChange:function(t,e){this.$emit("input",e.color.toString())}}});var t=new Vuex.Store({state:{post:{},form_fields:[],panel_sections:wpuf_form_builder.panel_sections,field_settings:wpuf_form_builder.field_settings,notifications:[],settings:{},integrations:{},current_panel:"form-fields",editing_field_id:0},mutations:{set_form_fields:function(t,e){Vue.set(t,"form_fields",e)},set_form_post:function(t,e){Vue.set(t,"post",e)},set_form_notification:function(t,e){Vue.set(t,"notifications",e)},set_form_integrations:function(t,e){Vue.set(t,"integrations",e)},set_form_settings:function(t,e){Vue.set(t,"settings",e)},set_current_panel:function(t,e){"field-options"!==t.current_panel&&"field-options"===e&&t.form_fields.length&&(t.editing_field_id=t.form_fields[0].id),"form-fields"===(t.current_panel=e)&&(t.editing_field_id=0)},panel_add_show_prop:function(n){n.panel_sections.map(function(t,e){t.hasOwnProperty("show")||Vue.set(n.panel_sections[e],"show",!0)})},panel_toggle:function(t,e){t.panel_sections[e].show=!t.panel_sections[e].show},open_field_settings:function(t,e){var n=t.form_fields.filter(function(t){return parseInt(e)===parseInt(t.id)});"field-options"===t.current_panel&&n[0].id===t.editing_field_id||n.length&&(t.editing_field_id=0,t.current_panel="field-options",setTimeout(function(){t.editing_field_id=n[0].id},400))},update_editing_form_field:function(t,e){var n=0;for(n=0;n<t.form_fields.length;n++)if(t.form_fields[n].id===parseInt(e.editing_field_id)&&(t.form_fields[n][e.field_name]=e.value),"column_field"===t.form_fields[n].template){var o=t.form_fields[n].inner_fields;for(var i in o)if(o.hasOwnProperty(i))for(var r=0;r<o[i].length;)o[i][r].id===parseInt(e.editing_field_id)&&(o[i][r][e.field_name]=e.value),r++}},add_form_field_element:function(t,e){t.form_fields.splice(e.toIndex,0,e.field),Vue.nextTick(function(){var t=s("#form-preview-stage .wpuf-form .field-items").eq(e.toIndex);t&&!function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}(t.get(0))&&s("#builder-stage section").scrollTo(t,800,{offset:-50})})},swap_form_field_elements:function(t,e){t.form_fields.swap(e.fromIndex,e.toIndex)},clone_form_field_element:function(t,e){var n=_.find(t.form_fields,function(t){return parseInt(t.id)===parseInt(e.field_id)}),o=s.extend(!0,{},n),i=parseInt(e.index)+1;o.id=e.new_id,o.name=o.name+"_copy",o.is_new=!0,t.form_fields.splice(i,0,o)},delete_form_field_element:function(t,e){t.current_panel="form-fields",t.form_fields.splice(e,1)},set_panel_section_fields:function(t,e){_.find(t.panel_sections,function(t){return t.id===e.id}).fields=e.fields},addNotification:function(t,e){t.notifications.push(_.clone(e))},deleteNotification:function(t,e){t.notifications.splice(e,1)},cloneNotification:function(t,e){var n=s.extend(!0,{},t.notifications[e]);e=parseInt(e)+1,t.notifications.splice(e,0,n)},updateNotificationProperty:function(t,e){t.notifications[e.index][e.property]=e.value},updateNotification:function(t,e){t.notifications[e.index]=e.value},updateIntegration:function(t,e){Vue.set(t.integrations,e.index,e.value)},add_column_inner_field_element:function(t,e){var n=t.form_fields.findIndex(function(t){return t.id===e.toWhichColumnField});(void 0===t.form_fields[n].inner_fields[e.toWhichColumn]&&(t.form_fields[n].inner_fields[e.toWhichColumn]=[]),void 0!==t.form_fields[n].inner_fields[e.toWhichColumn])&&(t.form_fields[n].inner_fields[e.toWhichColumn].filter(function(t){return t.name===e.field.name}).length<=0&&t.form_fields[n].inner_fields[e.toWhichColumn].splice(e.toIndex,0,e.field))},move_column_inner_fields:function(e,n){var o=e.form_fields.findIndex(function(t){return t.id===n.field_id}),i=n.inner_fields,r=[];Object.keys(i).forEach(function(t){"column-1"===n.move_to&&(i[t].forEach(function(t){r.push(t)}),e.form_fields[o].inner_fields[t].splice(0,i[t].length)),"column-2"===n.move_to&&("column-2"!==t&&"column-3"!==t||(i[t].forEach(function(t){r.push(t)}),e.form_fields[o].inner_fields[t].splice(0,i[t].length)))}),0!==r.length&&r.forEach(function(t){e.form_fields[o].inner_fields[n.move_to].splice(0,0,t)})},swap_column_field_elements:function(t,e){var n=t.form_fields.findIndex(function(t){return t.id===e.field_id}),o=t.form_fields[n].inner_fields[e.fromColumn][e.fromIndex];e.fromColumn!==e.toColumn?(t.form_fields[n].inner_fields[e.toColumn].splice(e.toIndex,0,o),t.form_fields[n].inner_fields[e.fromColumn].splice(e.fromIndex,1)):t.form_fields[n].inner_fields[e.toColumn].swap(e.fromIndex,e.toIndex)},open_column_field_settings:function(t,e){var n=e.column_field;"field-options"===t.current_panel&&n.id===t.editing_field_id||n&&(t.editing_field_id=0,t.current_panel="field-options",t.editing_field_type="column_field",t.editing_column_field_id=e.field_id,t.edting_field_column=e.column,t.editing_inner_field_index=e.index,setTimeout(function(){t.editing_field_id=n.id},400))},clone_column_field_element:function(t,e){var n=t.form_fields.findIndex(function(t){return t.id===e.field_id}),o=_.find(t.form_fields[n].inner_fields[e.toColumn],function(t){return parseInt(t.id)===parseInt(e.column_field_id)}),i=s.extend(!0,{},o),r=parseInt(e.index)+1;i.id=e.new_id,i.name=i.name+"_copy",i.is_new=!0,t.form_fields[n].inner_fields[e.toColumn].splice(r,0,i)},delete_column_field_element:function(t,e){var n=t.form_fields.findIndex(function(t){return t.id===e.field_id});t.current_panel="form-fields",t.form_fields[n].inner_fields[e.fromColumn].splice(e.index,1)}}});weForms.routeComponents.FormHome={template:'<div><router-view class="child"></router-view></div>'},weForms.routeComponents.SingleForm={template:"#tmpl-wpuf-form-editor"},weForms.routeComponents.FormEntriesHome={template:'<div><router-view class="grand-child"></router-view></div>'},function t(e){for(var n=0;n<e.length;n++)"object"===_typeof(e[n].children)?(t(e[n].children),void 0!==e[n].component&&(e[n].component=weForms.routeComponents[e[n].component])):e[n].component=weForms.routeComponents[e[n].component]}(weForms.routes);var e=new VueRouter({routes:weForms.routes,scrollBehavior:function(t,e,n){return n||{x:0,y:0}}});window.weFormsBuilderisDirty=!1,e.beforeEach(function(t,e,n){if(window.weFormsBuilderisDirty){if(!confirm(wpuf_form_builder.i18n.unsaved_changes+" "+wpuf_form_builder.i18n.areYouSureToLeave))return n(e.path),!1;window.weFormsBuilderisDirty=!1}n()}),weForms.validators={is_recaptcha_v2:function(){return"v2"===weForms.settings.recaptcha.type}};new Vue({router:e,store:t}).$mount("#wpuf-contact-form-app");var o=s("#toplevel_page_weforms");o.on("click","a",function(){var t=s(this);s("ul.wp-submenu li",o).removeClass("current"),t.hasClass("wp-has-submenu")?s("li.wp-first-item",o).addClass("current"):t.parents("li").addClass("current")}),s(function(){var t=window.location.href,n=t.substr(t.indexOf("admin.php"));s("ul.wp-submenu a",o).each(function(t,e){s(e).attr("href")!==n||s(e).parent().addClass("current")})})}(jQuery);