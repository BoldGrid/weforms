"use strict";!function(d){Vue.component("builder-stage",{template:"#tmpl-wpuf-builder-stage",mixins:wpuf_form_builder_mixins(wpuf_mixins.builder_stage),computed:{form_fields:function(){return this.$store.state.form_fields},field_settings:function(){return this.$store.state.field_settings},hidden_fields:function(){return this.$store.state.form_fields.filter(function(e){return"custom_hidden_field"===e.template||"humanpresence"===e.template})},editing_form_id:function(){return this.$store.state.editing_field_id},pro_link:function(){return wpuf_form_builder.pro_link}},created:function(){var e=this,t=0;for(t=0;t<e.$store.state.form_fields.length;t++)"humanpresence"===e.$store.state.form_fields[t].template&&e.$store.state.form_fields[t].id;wpuf_form_builder.event_hub.$on("humanpresence-changed",this.humanpresence_changed),wpuf_form_builder.event_hub.$on("humanpresence-disabled",this.delete_humanpresence_field)},mounted:function(){var f=this,r=!1;d("#form-preview-stage .wpuf-form.sortable-list").sortable({placeholder:"form-preview-stage-dropzone",items:".field-items",handle:".control-buttons .move",scroll:!0,over:function(){r=!1,d(".wpuf-column-inner-fields").on("drop",function(e){var t=e.currentTarget.classList;d.inArray(".wpuf-column-inner-fields",t)&&(r=!0)})},update:function(e,t){var i=t.item[0].dataset,n=i.source,o={toIndex:parseInt(d(t.item).index())};if("panel"===n){var s=t.item[0].dataset.formField,l=d.extend(!0,{},f.field_settings[s].field_props);if(f.isSingleInstance(s)&&f.containsField(s))return swal({title:"Oops...",text:"You already have this field in the form"}),void d(this).find(".button.ui-draggable.ui-draggable-handle").remove();l.id=f.get_random_id(),"yes"!==l.is_meta||l.name||(l.name=l.label.replace(/\W/g,"_").toLowerCase()+"_"+l.id),o.field=l,r||f.$store.commit("add_form_field_element",o),d(this).find(".button.ui-draggable.ui-draggable-handle").remove()}else"stage"===n&&(o.fromIndex=parseInt(i.index),f.$store.commit("swap_form_field_elements",o))}})},methods:{open_field_settings:function(e){this.$store.commit("open_field_settings",e)},clone_field:function(e,t){var i={field_id:e,index:t,new_id:this.get_random_id()},n=_.find(this.$store.state.form_fields,function(e){return parseInt(e.id)===parseInt(i.field_id)});this.isSingleInstance(n.template)&&this.containsField(n.template)?swal({title:"Oops...",text:"You already have this field in the form"}):this.$store.commit("clone_form_field_element",i)},delete_field:function(e){var t=this;swal({text:t.i18n.delete_field_warn_msg,type:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:t.i18n.yes_delete_it,cancelButtonText:t.i18n.no_cancel_it,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger"}).then(function(){t.$store.commit("delete_form_field_element",e)},function(){})},delete_field_no_confirm:function(e){this.$store.commit("delete_form_field_element",e)},delete_hidden_field:function(e){var t=0;for(t=0;t<this.form_fields.length;t++)parseInt(e)===parseInt(this.form_fields[t].id)&&("humanpresence"===this.form_fields[t].template?(this.delete_field_no_confirm(t),this.disable_humanpresence_setting()):this.delete_field(t))},delete_humanpresence_field:function(e){var t=0;if(e.$store.state.form_fields.length)for(t=0;t<e.$store.state.form_fields.length;t++)"humanpresence"===e.$store.state.form_fields[t].template&&(this.delete_field_no_confirm(t),this.disable_humanpresence_setting())},disable_humanpresence_setting:function(){var e=this.$store.state.settings;e.humanpresence_enabled=!1,this.$store.commit("set_form_settings",e)},humanpresence_changed:function(e,t){"true"===t.$store.state.settings.humanpresence_enabled?wpuf_form_builder.event_hub.$emit("humanpresence-enabled",t):wpuf_form_builder.event_hub.$emit("humanpresence-disabled",t)},is_pro_feature:function(e){return!(!this.field_settings[e]||!this.field_settings[e].pro_feature)},is_template_available:function(e){var t=e.template;return this.field_settings[t]?!this.is_pro_feature(t):!!_.isFunction(this["is_"+t+"_template_available"])&&this["is_"+t+"_template_available"].call(this,e)},is_full_width:function(e){return!(!this.field_settings[e]||!this.field_settings[e].is_full_width)},is_invisible:function(e){return!(!e.recaptcha_type||"invisible_recaptcha"!==e.recaptcha_type)},get_field_name:function(e){return this.field_settings[e].title}}}),Vue.component("field-checkbox",{template:"#tmpl-wpuf-field-checkbox",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){var e=this.editing_form_field[this.option_field.name];return this.option_field.is_single_opt?e===Object.keys(this.option_field.options)[0]:this.editing_form_field[this.option_field.name]},set:function(e){this.option_field.is_single_opt&&(e=e?Object.keys(this.option_field.options)[0]:""),this.$store.commit("update_editing_form_field",{editing_field_id:this.editing_form_field.id,field_name:this.option_field.name,value:e})}}}}),Vue.component("field-html_help_text",{template:"#tmpl-wpuf-field-html_help_text",mixins:[wpuf_mixins.option_field_mixin]}),Vue.component("field-multiselect",{template:"#tmpl-wpuf-field-multiselect",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.$store.commit("update_editing_form_field",{editing_field_id:this.editing_form_field.id,field_name:this.option_field.name,value:e})}}},mounted:function(){this.bind_selectize()},methods:{bind_selectize:function(){var t=this;d(this.$el).find(".term-list-selector").selectize({}).on("change",function(){var e=d(this).val();t.value=e})}}}),Vue.component("field-option-data",{template:"#tmpl-wpuf-field-option-data",mixins:[wpuf_mixins.option_field_mixin],data:function(){return{show_value:!1,options:[],selected:[]}},computed:{field_options:function(){return this.editing_form_field.options},field_selected:function(){return this.editing_form_field.selected}},mounted:function(){var s=this;this.set_options(),d(this.$el).find(".option-field-option-chooser").sortable({items:".option-field-option",handle:".sort-handler",update:function(e,t){var i=t.item[0].dataset,n=parseInt(d(t.item).index()),o=parseInt(i.index);s.options.swap(o,n)}})},methods:{set_options:function(){var i=this,e=d.extend(!0,{},this.editing_form_field.options);_.each(e,function(e,t){i.options.push({label:e,value:t,id:i.get_random_id()})}),this.option_field.is_multiple&&!_.isArray(this.field_selected)?this.selected=[this.field_selected]:this.selected=this.field_selected},clear_selection:function(){this.selected=null},add_option:function(){var e=this.options.length,t=this.i18n.option+"-"+(e+1);this.options.push({label:t,value:t,id:this.get_random_id()})},delete_option:function(e){1!==this.options.length?this.options.splice(e,1):this.warn({text:this.i18n.last_choice_warn_msg,showCancelButton:!1,confirmButtonColor:"#46b450"})},set_option_label:function(e,t){this.options[e].value=t.toLocaleLowerCase().replace(/\s/g,"_")}},watch:{options:{deep:!0,handler:function(e){var t={},i=0;for(i=0;i<e.length;i++)t[e[i].value]=e[i].label;this.update_value("options",t)}},selected:function(e){this.update_value("selected",e)}}}),Vue.component("field-option-pro-feature-alert",{template:"#tmpl-wpuf-field-option-pro-feature-alert",mixins:[wpuf_mixins.option_field_mixin],computed:{pro_link:function(){return wpuf_form_builder.pro_link}}}),Vue.component("field-options",{template:"#tmpl-wpuf-field-options",mixins:wpuf_form_builder_mixins(wpuf_mixins.field_options),data:function(){return{show_basic_settings:!0,show_advanced_settings:!1,show_quiz_settings:!1,show_humanpresence_settings:!1}},computed:{editing_field_id:function(){return this.show_basic_settings=!0,this.show_advanced_settings=!1,this.show_quiz_settings=!1,this.show_humanpresence_settings=!1,parseInt(this.$store.state.editing_field_id)},editing_form_field:function(){var e=this,t=0;for(t=0;t<e.$store.state.form_fields.length;t++){if(e.$store.state.form_fields[t].id===parseInt(e.editing_field_id))return e.$store.state.form_fields[t];if("column_field"===e.$store.state.form_fields[t].template){var i=e.$store.state.form_fields[t].inner_fields;for(var n in i)if(i.hasOwnProperty(n))for(var o=0;o<i[n].length;){if(i[n][o].id===e.editing_field_id)return i[n][o];o++}}}},settings:function(){var e=[],t=this.editing_form_field.template;return e=_.isFunction(this["settings_"+t])?this["settings_"+t].call(this,this.editing_form_field):this.$store.state.field_settings[t].settings,_.sortBy(e,function(e){return parseInt(e.priority)})},basic_settings:function(){return this.settings.filter(function(e){return"basic"===e.section})},advanced_settings:function(){return this.settings.filter(function(e){return"advanced"===e.section})},quiz_settings:function(){return this.settings.filter(function(e){return"quiz"===e.section})},humanpresence_settings:function(){return this.settings.filter(function(e){return"humanpresence"===e.section})},form_field_type_title:function(){var e=this.editing_form_field.template;return _.isFunction(this["form_field_"+e+"_title"])?this["form_field_"+e+"_title"].call(this,this.editing_form_field):this.$store.state.field_settings[e].title},form_settings:function(){return this.$store.state.settings}},watch:{form_settings:function(){return this.$store.state.settings}}}),Vue.component("field-radio",{template:"#tmpl-wpuf-field-radio",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.$store.commit("update_editing_form_field",{editing_field_id:this.editing_form_field.id,field_name:this.option_field.name,value:e})}}}}),Vue.component("field-range",{template:"#tmpl-wpuf-field-range",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.update_value(this.option_field.name,e)}},minColumn:function(){return this.editing_form_field.min_column},maxColumn:function(){return this.editing_form_field.max_column}},methods:{}}),Vue.component("field-select",{template:"#tmpl-wpuf-field-select",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.$store.commit("update_editing_form_field",{editing_field_id:this.editing_form_field.id,field_name:this.option_field.name,value:e})}}}}),Vue.component("field-text",{template:"#tmpl-wpuf-field-text",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.update_value(this.option_field.name,e)}}},methods:{on_focusout:function(e){wpuf_form_builder.event_hub.$emit("field-text-focusout",e,this)},on_keyup:function(e){wpuf_form_builder.event_hub.$emit("field-text-keyup",e,this)}}}),Vue.component("field-text-meta",{template:"#tmpl-wpuf-field-text-meta",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.update_value(this.option_field.name,e)}}},created:function(){"yes"===this.editing_form_field.is_meta&&(this.value||(this.value=this.editing_form_field.label.replace(/\W/g,"_").toLowerCase()),wpuf_form_builder.event_hub.$on("field-text-keyup",this.meta_key_autocomplete))},methods:{meta_key_autocomplete:function(e,t){"label"===t.option_field.name&&parseInt(this.editing_form_field.id)===parseInt(t.editing_form_field.id)&&(this.value=t.value.replace(/\W/g,"_").toLowerCase())}}}),Vue.component("field-textarea",{template:"#tmpl-wpuf-field-textarea",mixins:[wpuf_mixins.option_field_mixin],computed:{value:{get:function(){return this.editing_form_field[this.option_field.name]},set:function(e){this.update_value(this.option_field.name,e)}}}}),Vue.component("field-visibility",{template:"#tmpl-wpuf-field-visibility",mixins:[wpuf_mixins.option_field_mixin],computed:{selected:{get:function(){return this.editing_form_field[this.option_field.name].selected},set:function(e){this.$store.commit("update_editing_form_field",{editing_field_id:this.editing_form_field.id,field_name:this.option_field.name,value:{selected:e,choices:[]}})}},choices:{get:function(){return this.editing_form_field[this.option_field.name].choices},set:function(e){this.$store.commit("update_editing_form_field",{editing_field_id:this.editing_form_field.id,field_name:this.option_field.name,value:{selected:this.selected,choices:e}})}}},methods:{},watch:{selected:function(e){this.update_value("selected",e)}}}),Vue.component("form-checkbox_field",{template:"#tmpl-wpuf-form-checkbox_field",mixins:[wpuf_mixins.form_field_mixin]});var e=[wpuf_mixins.form_field_mixin];window.wpuf_forms_mixin_builder_stage&&e.push(window.wpuf_forms_mixin_builder_stage),window.weforms_mixin_builder_stage&&e.push(window.weforms_mixin_builder_stage),Vue.component("form-column_field",{template:"#tmpl-wpuf-form-column_field",mixins:e,data:function(){return{columnClasses:["column-1","column-2","column-3"]}},mounted:function(){this.resizeColumns(this.field.columns);var s=this,e=d(s.$el).find(".wpuf-column-inner-fields .wpuf-column-fields-sortable-list"),l=1,t=d(".wpuf-field-columns"),i=d(s.$el).find(".wpuf-column-field-inner-columns .wpuf-column-inner-fields");t.mouseenter(function(){s.resizeColumns(s.field.columns)}),t.mouseleave(function(){i.unbind("mouseup"),i.unbind("mousemove")}),d(e).sortable({placeholder:"form-preview-stage-dropzone",connectWith:e,items:".column-field-items",handle:".wpuf-column-field-control-buttons .move",scroll:!0,stop:function(e,t){if("panel"===d(t.item).attr("data-source")){var i={toIndex:parseInt(d(t.item).index()),field_template:d(t.item).attr("data-form-field"),to_column:d(this).parent()[0].classList[0]};s.add_column_inner_field(i),d(this).find(".button.ui-draggable.ui-draggable-handle").remove()}},update:function(e,t){var i=t.item[0],n=i.dataset.source,o={toIndex:parseInt(d(i).index())};"column-field-stage"===n&&(o.field_id=s.field.id,o.fromIndex=parseInt(d(i).attr("column-field-index")),o.fromColumn=d(i).attr("in-column"),o.toColumn=d(i).parent().parent()[0].classList[0],o.fromColumn!==o.toColumn&&1===l?l=0:l++,o.fromColumn===o.toColumn&&(l=1),1===l&&s.$store.commit("swap_column_field_elements",o))}})},computed:{column_fields:function(){return this.field.inner_fields},innerColumns:function(){return this.field.columns},editing_form_id:function(){return this.$store.state.editing_field_id},field_settings:function(){return this.$store.state.field_settings}},methods:{is_template_available:function(e){var t=e.template;return this.field_settings[t]?!this.is_pro_feature(t):!!_.isFunction(this["is_"+t+"_template_available"])&&this["is_"+t+"_template_available"].call(this,e)},is_pro_feature:function(e){return!(!this.field_settings[e]||!this.field_settings[e].pro_feature)},get_field_name:function(e){return this.field_settings[e].title},is_full_width:function(e){return!(!this.field_settings[e]||!this.field_settings[e].is_full_width)},is_invisible:function(e){return!(!e.recaptcha_type||"invisible_recaptcha"!==e.recaptcha_type)},isAllowedInClolumnField:function(e){return 0<=d.inArray(e,["column_field","custom_hidden_field","step_start"])},add_column_inner_field:function(e){var t={toWhichColumnField:this.field.id,toWhichColumnFieldMeta:this.field.name,toIndex:e.toIndex,toWhichColumn:e.to_column};if(this.isAllowedInClolumnField(e.field_template))swal({title:"Oops...",text:"You cannot add this field as inner column field"});else if(this.isSingleInstance(e.field_template)&&this.containsField(e.field_template))swal({title:"Oops...",text:"You already have this field in the form"});else{var i=d.extend(!0,{},this.$store.state.field_settings[e.field_template].field_props),n=this.$store.state.form_fields;if(i.id=this.get_random_id(),"yes"===i.is_meta&&!i.name&&i.label)i.name=i.label.replace(/\W/g,"_").toLowerCase(),n.filter(function(e){return e.template===i.template})&&(i.name+="_"+this.get_random_id());t.field=i,this.$store.commit("add_column_inner_field_element",t)}},moveFieldsTo:function(e){var t={field_id:this.field.id,move_to:e,inner_fields:this.getInnerFields()};this.$store.commit("move_column_inner_fields",t)},getInnerFields:function(){return this.field.inner_fields},open_column_field_settings:function(e,t,i){var n={field_id:this.field.id,column_field:e,index:t,column:i};this.$store.commit("open_column_field_settings",n)},clone_column_field:function(e,t,i){var n={field_id:this.field.id,column_field_id:e.id,index:t,toColumn:i,new_id:this.get_random_id()};this.isSingleInstance(e.template)?swal({title:"Oops...",text:"You already have this field in the form"}):this.$store.commit("clone_column_field_element",n)},delete_column_field:function(e,t){var i=this,n={field_id:i.field.id,index:e,fromColumn:t};swal({text:i.i18n.delete_field_warn_msg,type:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:i.i18n.yes_delete_it,cancelButtonText:i.i18n.no_cancel_it,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger"}).then(function(){i.$store.commit("delete_column_field_element",n)},function(){})},resizeColumns:function(n){var o,i,s,l,f=this;s=d(f.$el).parent(),l=parseInt(d(s).width()),Array.prototype.forEach.call(d(f.$el).find(".wpuf-column-field-inner-columns .wpuf-column-inner-fields"),function(t){t.style.position="relative";var e=document.createElement("div");e.innerHTML="&nbsp;",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.width="5px",e.style.position="absolute",e.style.cursor="col-resize",e.addEventListener("mousedown",function(e){i=(o=t).offsetWidth-e.pageX}),t.appendChild(e)}),d(f.$el).find(".wpuf-column-field-inner-columns .wpuf-column-inner-fields").mousemove(function(e){if(o){var t=i+e.pageX;o.style.width=100*t/l+"%"}}),d(f.$el).find(".wpuf-column-field-inner-columns .wpuf-column-inner-fields").mouseup(function(){var e=0,t=0,i=0;i=3===n?t=e=100/n:(t=2===n?e=100/n:(e=d(s).find(".column-1").width(),d(s).find(".column-2").width()),0),f.field.inner_columns_size["column-1"]=e+"%",f.field.inner_columns_size["column-2"]=t+"%",f.field.inner_columns_size["column-3"]=i+"%",o=void 0})}},watch:{innerColumns:function(e){var t=parseInt(e),i=this.field.inner_columns_size;Object.keys(i).forEach(function(e){1===t&&(i[e]="100%"),2===t&&(i[e]="50%"),3===t&&(i[e]="33.33%")}),1===t&&this.moveFieldsTo("column-1"),2===t&&this.moveFieldsTo("column-2"),this.resizeColumns(t)}}}),Vue.component("form-custom_hidden_field",{template:"#tmpl-wpuf-form-custom_hidden_field",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-custom_html",{template:"#tmpl-wpuf-form-custom_html",mixins:[wpuf_mixins.form_field_mixin],data:function(){return{raw_html:"<p>from data</p>"}}}),Vue.component("form-dropdown_field",{template:"#tmpl-wpuf-form-dropdown_field",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-email_address",{template:"#tmpl-wpuf-form-email_address",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-featured_image",{template:"#tmpl-wpuf-form-featured_image",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-fields",{template:"#tmpl-wpuf-form-fields",mixins:wpuf_form_builder_mixins(wpuf_mixins.form_fields),computed:{panel_sections:function(){return this.$store.state.panel_sections},field_settings:function(){return this.$store.state.field_settings},form_fields:function(){return this.$store.state.form_fields}},created:function(){wpuf_form_builder.event_hub.$on("humanpresence-enabled",this.add_humanpresence_field)},mounted:function(){d(this.$el).find(".panel-form-field-buttons .button").not('[data-form-field="humanpresence"]').draggable({connectToSortable:"#form-preview-stage .wpuf-form, .wpuf-column-inner-fields .wpuf-column-fields-sortable-list",helper:"clone",revert:"invalid",cancel:".button-faded"}).disableSelection()},methods:{panel_toggle:function(e){this.$store.commit("panel_toggle",e)},add_form_field:function(e){var t={toIndex:this.$store.state.form_fields.length};if(this.isSingleInstance(e)&&this.containsField(e))swal({title:"Oops...",text:"You already have this field in the form"});else{var i=d.extend(!0,{},this.$store.state.field_settings[e].field_props);if(i.id=this.get_random_id(),!i.name&&i.label){i.name=i.label.replace(/\W/g,"_").toLowerCase();var n=this.form_fields.filter(function(e){return e.template===i.template});n.length&&(i.name+="_"+n.length)}if("humanpresence"===e){var o=this.$store.state.settings;o.humanpresence_enabled=!0,this.$store.commit("set_form_settings",o)}t.field=i,this.$store.commit("add_form_field_element",t)}},add_humanpresence_field:function(e){this.containsField("humanpresence")||this.add_form_field("humanpresence")},is_pro_feature:function(e){return this.field_settings[e].pro_feature},alert_pro_feature:function(e){var t=this.field_settings[e].title;swal({title:'<i class="fa fa-lock"></i> '+t+" <br>"+this.i18n.is_a_pro_feature,text:this.i18n.pro_feature_msg,type:"",showCancelButton:!0,cancelButtonText:this.i18n.close,confirmButtonColor:"#46b450",confirmButtonText:this.i18n.upgrade_to_pro}).then(function(e){e&&window.open(wpuf_form_builder.pro_link,"_blank")},function(){})},alert_invalidate_msg:function(e){var t=this.field_settings[e].validator;t&&t.msg&&this.warn({title:t.msg_title||"",html:t.msg,type:"warning",showCancelButton:!1,confirmButtonColor:"#46b450",confirmButtonText:this.i18n.ok})},get_invalidate_btn_class:function(e){return this.field_settings[e].validator.button_class}}}),Vue.component("form-image_upload",{template:"#tmpl-wpuf-form-image_upload",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-multiple_select",{template:"#tmpl-wpuf-form-multiple_select",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-post_content",{template:"#tmpl-wpuf-form-post_content",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-post_excerpt",{template:"#tmpl-wpuf-form-post_excerpt",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-post_tags",{template:"#tmpl-wpuf-form-post_tags",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-post_title",{template:"#tmpl-wpuf-form-post_title",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-radio_field",{template:"#tmpl-wpuf-form-radio_field",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-recaptcha",{template:"#tmpl-wpuf-form-recaptcha",mixins:[wpuf_mixins.form_field_mixin],computed:{has_recaptcha_api_keys:function(){return!(!wpuf_form_builder.recaptcha_site||!wpuf_form_builder.recaptcha_secret)},no_api_keys_msg:function(){return wpuf_form_builder.field_settings.recaptcha.validator.msg}}}),Vue.component("form-humanpresence",{template:"#tmpl-wpuf-form-humanpresence",mixins:[wpuf_mixins.form_field_mixin],computed:{has_humanpresence_installed:function(){return wpuf_form_builder.humanpresence_installed},no_humanpresence_installed_msg:function(){return wpuf_form_builder.field_settings.humanpresence.validator.msg}}}),Vue.component("form-section_break",{template:"#tmpl-wpuf-form-section_break",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-taxonomy",{template:"#tmpl-wpuf-form-taxonomy",mixins:[wpuf_mixins.form_field_mixin],computed:{terms:function(){var e;for(e in wpuf_form_builder.wp_post_types){var t=wpuf_form_builder.wp_post_types[e];if(t.hasOwnProperty(this.field.name)){var i=t[this.field.name];if(i.terms)return i.terms}}return[]},sorted_terms:function(){var t=this,i=d.extend(!0,[],this.terms);if(this.field.exclude_type&&this.field.exclude){if(1<this.field.exclude.length)var n=this.field.exclude.split(",").map(function(e){return e=e.trim(),e=parseInt(e)}).filter(function(e){return isFinite(e)});i=i.filter(function(e){switch(t.field.exclude_type){case"exclude":return _.indexOf(n,e.term_id)<0;case"include":return 0<=_.indexOf(n,e.term_id);case"child_of":return 0<=_.indexOf(n,parseInt(e.parent))}})}i=_.sortBy(i,function(e){return e[t.field.orderby]}),"DESC"===this.field.order&&(i=i.reverse());var e=i.filter(function(e){return!e.parent});return e.map(function(e){e.children=t.get_child_terms(e.term_id,i)}),e.length?e:i}},methods:{get_child_terms:function(t,i){var n=this,e=i.filter(function(e){return parseInt(e.parent)===parseInt(t)});return e.map(function(e){e.children=n.get_child_terms(e.term_id,i)}),e},get_term_dropdown_options:function(){var t=this,i="";return"select"===this.field.type&&(i='<option value="">'+this.field.first+"</option>"),_.each(t.sorted_terms,function(e){i+=t.get_term_dropdown_options_children(e,0)}),i},get_term_dropdown_options_children:function(e,t){var i=this,n="",o="",s=0;for(s=0;s<t;s++)o+="&nbsp;&nbsp;";return n+='<option value="'+e.id+'">'+o+e.name+"</option>",e.children.length&&_.each(e.children,function(e){n+=i.get_term_dropdown_options_children(e,t+1)}),n},get_term_checklist:function(){var t=this,i="";return i+='<ul class="wpuf-category-checklist">',_.each(this.sorted_terms,function(e){i+=t.get_term_checklist_li(e)}),i+="</ul>"},get_term_checklist_li:function(e){var t=this,i="";return i+='<li><label class="selectit"><input type="checkbox"> '+e.name+"</label></li>",e.children.length&&(i+='<ul class="children">',_.each(e.children,function(e){i+=t.get_term_checklist_li(e)}),i+="</ul>"),i},get_term_checklist_inline:function(){var t=this,i="";return _.each(this.sorted_terms,function(e){i+=t.get_term_checklist_li_inline(e)}),i},get_term_checklist_li_inline:function(e){var t=this,i="";return i+='<label class="wpuf-checkbox-inline"><input type="checkbox"> '+e.name+"</label>",e.children.length&&_.each(e.children,function(e){i+=t.get_term_checklist_li_inline(e)}),i}}}),Vue.component("form-text_field",{template:"#tmpl-wpuf-form-text_field",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-textarea_field",{template:"#tmpl-wpuf-form-textarea_field",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("form-website_url",{template:"#tmpl-wpuf-form-website_url",mixins:[wpuf_mixins.form_field_mixin]}),Vue.component("help-text",{template:"#tmpl-wpuf-help-text",props:{text:{type:String,default:""}},mounted:function(){d(".wpuf-tooltip").tooltip()}}),Vue.component("text-editor",{template:"#tmpl-wpuf-text-editor",props:["rich","default_text"],computed:{site_url:function(){return wpuf_form_builder.site_url},is_full:function(){return"yes"===this.rich}}})}(jQuery);